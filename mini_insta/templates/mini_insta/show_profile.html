<!--
File: show_profile.html
Author: Berk Komurcuoglu (berkkom@bu.edu), 2/18/2026
Description: Displays a single Profile record (profile detail page).
-->

{% extends "mini_insta/base.html" %}

{% block content %}
  <h2 class="page-title">{{ profile.display_name }}</h2>

  <div class="profile-detail">
    <div class="profile-left">
      {% if profile.profile_image_url %}
        <img class="profile-avatar-large"
             src="{{ profile.profile_image_url }}"
             alt="{{ profile.username }} profile image">
      {% else %}
        <div class="profile-avatar-large placeholder"></div>
      {% endif %}
    </div>

    <div class="profile-right">
      <table class="profile-table">
        <tr>
          <th>Username</th>
          <td>@{{ profile.username }}</td>
        </tr>
        <tr>
          <th>Display name</th>
          <td>{{ profile.display_name }}</td>
        </tr>
        <tr>
          <th>Bio</th>
          <td>{{ profile.bio_text|linebreaksbr }}</td>
        </tr>
        <tr>
          <th>Join date</th>
          <td>{{ profile.join_date }}</td>
        </tr>
      </table>
    </div>
    <h3>Posts</h3>

    <div class="post-grid">
      {% for post in profile.get_all_posts %}
        {% with first_photo=post.get_all_photos.first %}
          <a class="post-link" href="{% url 'show_post' post.pk %}">
            <div class="post-tile">
              {% if first_photo %}
                <img class="post-thumb" src="{{ first_photo.image_url }}" alt="Post thumbnail">
              {% else %}
                <img class="post-thumb" src="https://via.placeholder.com/300?text=No+Image" alt="No image">
              {% endif %}
            </div>
          </a>
        {% endwith %}
      {% empty %}
        <p class="muted"><em>No posts yet.</em></p>
      {% endfor %}
    </div>
  </div>
{% endblock %}
